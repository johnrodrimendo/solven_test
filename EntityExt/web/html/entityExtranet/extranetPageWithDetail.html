<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="templates/extranetTemplate"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&amp;subset=all" rel="stylesheet" type="text/css"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/dropzone/dist/min/dropzone.min.css'}" rel="stylesheet"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/ekko-lightbox/dist/ekko-lightbox.min.css'}" rel="stylesheet"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/select2/css/select2.min.css'}" rel="stylesheet" type="text/css"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/select2/css/select2-bootstrap.min.css'}" rel="stylesheet" type="text/css"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/swipebox/css/swipebox.min.css'}" rel="stylesheet"/>

    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/jquery-validation/dist/jquery.validate.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/jquery-validation/dist/additional-methods.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/dropzone/dist/min/dropzone.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/ekko-lightbox/dist/ekko-lightbox.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/bootstrap-datetimepicker-4.17/bootstrap-datetimepicker.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/counterup/jquery.waypoints.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/counterup/jquery.counterup.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/swipebox/js/jquery.swipebox.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/flot/jquery.flot.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/flot/jquery.flot.resize.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/flot/jquery.flot.categories.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/flot/jquery.flot.pie.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/select2/js/select2.full.min.js'}" type="text/javascript"></script>
    <!-- Bootstrap DatePicker -->
    <link rel="stylesheet" th:href="${@urlService.externalUrl(#httpServletRequest) + '/bootstrap-datepicker-1.9/dist/css/bootstrap-datepicker3.min.css'}" />
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/bootstrap-datepicker-1.9/dist/js/bootstrap-datepicker.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/bootstrap-datepicker-1.9/dist/locales/bootstrap-datepicker.es.min.js'}"></script>

    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/jPlayer/dist/jplayer/jquery.jplayer.js'}"></script>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/jPlayer/dist/skin/blue.monday/css/jplayer.blue.monday.min.css'}" rel="stylesheet"/>

    <script async="true" th:src="${@urlService.externalUrl(#httpServletRequest) + '/jquery-mask/dist/jquery.mask.min.js'}"></script>
    <script async="true" th:src="${@urlService.externalUrl(#httpServletRequest) + '/jquery-masknumber/dist/jquery.masknumber.min.js'}"></script>

    <script async="true" th:src="${@urlService.externalUrl(#httpServletRequest) + '/jquery-mask/dist/jquery.mask.min.js'}"></script>
    <script async="true" th:src="${@urlService.externalUrl(#httpServletRequest) + '/jquery-masknumber/dist/jquery.masknumber.min.js'}"></script>


    <!--    RANGEPICKER-->
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/rangepicker/daterangepicker.min.js'}" type="text/javascript"></script>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/rangepicker/daterangepicker.css'}" rel="stylesheet"/>


    <script defer="defer"
            th:src="${'https://maps.googleapis.com/maps/api/js?libraries=geometry,places&amp;key=' + (T(com.affirm.system.configuration.Configuration).GOOGLE_API_KEY)}"></script>

    <script th:src="@{/js/bo_tablefilter.js}"></script>
    <script th:inline="javascript">
        Dropzone.autoDiscover = false;
    </script>
    <script>
        function resetTimer() {
            endTime = (+new Date) + 1000 * (60*defaultMin) + 500;
        }
    </script>

    <th:block th:replace="/entityExtranet/fragments/extranetDetailFragments :: detailLoanResources" />

    <style>
        .dataTables_wrapper{
            width: 97% !important;
        }
        .modal-backdrop, .modal-backdrop.fade.in{
            background-color: #57575752 !important;
        }
        .col-div-3{
            width: 22%;
        }

        .col-div-2{
            width: 18%;
        }


        .col-div-1-5{
            width: 14%;
        }

        .col-div-1{
            width: 10%;
        }

        .media-player-container{
            background-color: #f5f5f5;
            min-height: 70px;
            border: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
        }

        .media-player{
            width: 70%;
            min-height: 70px;
        }

        .media-player-options{
            width: 30%;
            border-left: 1px solid #f0f0f0;
            min-height: 70px;
        }

    </style>

    <script>
        /*<![CDATA[*/

        $(document).ready(function(){

            $('tooltip-on').tooltip()

            $('svg.radial-progress').each(function( index, value ) {
                $(this).find($('circle.complete')).removeAttr( 'style' );
            });

            $(window).scroll(function(){
                $('svg.radial-progress').each(function( index, value ) {
                    // If svg.radial-progress is approximately 25% vertically into the window when scrolling from the top or the bottom
                    if (
                        $(window).scrollTop() > $(this).offset().top - ($(window).height() * 0.75) &&
                        $(window).scrollTop() < $(this).offset().top + $(this).height() - ($(window).height() * 0.25)
                    ) {
                        // Get percentage of progress
                        percent = $(value).data('percentage');
                        // Get radius of the svg's circle.complete
                        radius = $(this).find($('circle.complete')).attr('r');
                        // Get circumference (2Ï€r)
                        circumference = 2 * Math.PI * radius;
                        // Get stroke-dashoffset value based on the percentage of the circumference
                        strokeDashOffset = circumference - ((percent * circumference) / 100);
                        // Transition progress for 1.25 seconds
                        $(this).find($('circle.complete')).animate({'stroke-dashoffset': strokeDashOffset}, 1250);
                    }
                });
            }).trigger('scroll');

        })
        /*]]>*/
    </script>

    <th:block th:replace="components/tracking :: social" />

    <script th:inline="javascript">
        /*<![CDATA[*/
        var url = /*[[ @{/extranet-paginator/} ]]*/;
        var totalCount = [[${totalCount}]];
        var limitPaginator =  [[${limitPaginator}]];
        url += /*[[ ${page} ]]*/;
        $(document).on('ready', function () {
            enableTableOptions($("#tableResultEvaluation"), url, url+"/count", true, "#downloadTrayReport");
        });
        /*]]>*/
    </script>

</head>
<body>
<th:block layout:fragment="header">
    <div class="clearfix"></div>
</th:block>
<th:block layout:fragment="content">
    <th:block th:replace="fragments/extranetSidebarFragments :: extranetEntitySidebar(currentPage=${page})"></th:block>

    <div class="page-content-wrapper">
        <div class="page-content entity-evaluation-page">
            <div class="row w-creditos-procesados">
                <th:block th:if="${page}">
                    <th:block th:switch="${page}">
                        <th:block th:case="generated">
                            <th:block th:replace="fragments/headers :: entityContentHeaderWithFiltersProduct"></th:block>
                        </th:block>
                        <th:block th:case="rejected">
                            <th:block th:replace="fragments/headers :: entityContentHeaderWithFiltersRejectedPage"></th:block>
                        </th:block>
                        <th:block th:case="*">
                            <th:block th:replace="fragments/headers :: entityContentHeaderWithFiltersProductDefault"></th:block>
                        </th:block>
                    </th:block>
                </th:block>
                <th:block th:unless="${page}">
                    <th:block th:replace="fragments/headers :: entityContentHeaderWithFiltersProductDefault"></th:block>
                </th:block>
                <div class="col-xs-12">
                    <div id="creditsTable" class="tablefilter-table table-container">
                        <div class="table-responsive" style="overflow: auto; display: flex; justify-content: center; flex-direction: column">
                            <table id="tableResultEvaluation" class=" table table-striped white-color order-column align-left">
                                <thead>
                                    <th:block th:replace="this :: headerTable"></th:block>
                                </thead>
                                <tbody>
                                    <th:block th:replace="this :: list"></th:block>
                                </tbody>
                            </table>
                            <th:block th:replace="fragments/footers :: paginatorFooter "></th:block>
                        </div>
                    </div>
                </div>


        </div>
        </div>
    </div>

    <!-- Modals -->
    <th:block th:replace="/entityExtranet/fragments/extranetModalFragments :: modalCreditActions"></th:block>

</th:block>

<th:block th:fragment="headerTable">
    <th:block th:switch="${page}">
        <th:block th:case="generated">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerGenerated"></th:block>
        </th:block>
        <th:block th:case="terminated">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerTerminated"></th:block>
        </th:block>
        <th:block th:case="callcenter">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerCallCenter"></th:block>
        </th:block>
        <th:block th:case="generatedtc">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerGeneratedTc"></th:block>
        </th:block>
        <th:block th:case="terminatedtc">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerTerminatedTc"></th:block>
        </th:block>
        <th:block th:case="pending">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerPending"></th:block>
        </th:block>
        <th:block th:case="toUpload">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerToUpload"></th:block>
        </th:block>
        <th:block th:case="rejected">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerRejected"></th:block>
        </th:block>
        <th:block th:case="beingProcessed">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerBeingProcessed"></th:block>
        </th:block>
    </th:block>
</th:block>

<th:block th:fragment="list">
    <th:block th:if="${#lists.isEmpty(credits)}">
            <tr>
                <td colspan="20">No hay resultados</td>
            </tr>
    </th:block>
    <th:block th:unless="${#lists.isEmpty(credits)}">
        <th:block th:if="${page == 'generatedtc'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyGeneratedTc"></th:block>
        </th:block>
        <th:block th:if="${page == 'terminatedtc'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyTerminatedTc"></th:block>
        </th:block>
        <th:block th:if="${page == 'callcenter'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyCallCenter"></th:block>
        </th:block>
        <th:block th:if="${page == 'terminated'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyTerminated"></th:block>
            <th:block th:replace="/entityExtranet/fragments/extranetModalFragments :: modalCreditActionsScripts"></th:block>
        </th:block>
        <th:block th:if="${page == 'generated'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyGenerated"></th:block>
            <th:block th:replace="/entityExtranet/fragments/extranetModalFragments :: modalCreditActionsScripts"></th:block>
        </th:block>
        <th:block th:if="${page == 'pending'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyPending"></th:block>
            <th:block th:replace="/entityExtranet/fragments/extranetModalFragments :: modalCreditActionsScripts"></th:block>
        </th:block>
        <th:block th:if="${page == 'toUpload'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyToUpload"></th:block>
            <th:block th:replace="/entityExtranet/fragments/extranetModalFragments :: modalCreditActionsScripts"></th:block>
        </th:block>
        <th:block th:if="${page == 'rejected'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyRejected"></th:block>
        </th:block>
        <th:block th:if="${page == 'beingProcessed'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyBeingProcessed"></th:block>
        </th:block>
    </th:block>

    <script>
        replaceImgSvgToSvgElement();
        enableSelect();
    </script>

</th:block>

</body>
</html>