<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="templates/extranetTemplate"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&amp;subset=all" rel="stylesheet" type="text/css"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/dropzone/dist/min/dropzone.min.css'}" rel="stylesheet"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/ekko-lightbox/dist/ekko-lightbox.min.css'}" rel="stylesheet"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/select2/css/select2.min.css'}" rel="stylesheet" type="text/css"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/select2/css/select2-bootstrap.min.css'}" rel="stylesheet" type="text/css"/>
    <link th:href="${@urlService.externalUrl(#httpServletRequest) + '/swipebox/css/swipebox.min.css'}" rel="stylesheet"/>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/jquery-validation/dist/jquery.validate.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/jquery-validation/dist/additional-methods.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/dropzone/dist/min/dropzone.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/ekko-lightbox/dist/ekko-lightbox.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/bootstrap-datetimepicker-4.17/bootstrap-datetimepicker.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/counterup/jquery.waypoints.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/counterup/jquery.counterup.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/swipebox/js/jquery.swipebox.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/flot/jquery.flot.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/flot/jquery.flot.resize.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/flot/jquery.flot.categories.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/flot/jquery.flot.pie.min.js'}" type="text/javascript"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/select2/js/select2.full.min.js'}" type="text/javascript"></script>
    <!-- Bootstrap DatePicker -->
    <link rel="stylesheet" th:href="${@urlService.externalUrl(#httpServletRequest) + '/bootstrap-datepicker-1.9/dist/css/bootstrap-datepicker3.min.css'}" />
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/bootstrap-datepicker-1.9/dist/js/bootstrap-datepicker.min.js'}"></script>
    <script th:src="${@urlService.externalUrl(#httpServletRequest) + '/bootstrap-datepicker-1.9/dist/locales/bootstrap-datepicker.es.min.js'}"></script>

    <script th:src="@{/js/bo_tablefilter.js}"></script>
    <script th:inline="javascript">
        Dropzone.autoDiscover = false;
    </script>
    <script>
        function resetTimer() {
            endTime = (+new Date) + 1000 * (60*defaultMin) + 500;
        }
    </script>
    <script th:inline="javascript">
        /*<![CDATA[*/
        var url = /*[[ @{/extranet-paginator/} ]]*/;
        var totalCount = [[${totalCount}]];
        var limitPaginator =  [[${limitPaginator}]];
        url += /*[[ ${page} ]]*/;
        var isBDS = /*[[@{entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).AZTECA}]]*/false;
        $(document).on('ready', function () {
            enableTableOptions($("#tableResults"), url, url+"/count", true, "#downloadTrayReport");
        });
        /*]]>*/
    </script>


    <th:block th:replace="components/tracking :: social" />
    <script th:inline="javascript">
        /*<![CDATA[*/
        function gtag_report_conversion(id, url) {
            dataLayer.push({
                'event': 'conversion',
                'transaction_id': id+''
            });
            return false;
        }
        /*]]>*/
    </script>

    <style>
        .dataTables_wrapper{
            width: 97% !important;
        }

        .table > thead > tr > th, .table > thead > tr > td, .table > tbody > tr > th, .table > tbody > tr > td, .table > tfoot > tr > th, .table > tfoot > tr > td{
            padding: 6px !important;
        }
    </style>
</head>
<body>
<th:block layout:fragment="header">
<!--    <th:block th:replace="fragments/headers :: entityDashboardHeader "></th:block>-->
    <div class="clearfix"></div>
</th:block>
<th:block layout:fragment="content">
    <th:block th:replace="fragments/extranetSidebarFragments :: extranetEntitySidebar(currentPage=${page})"></th:block>
    <div class="page-content-wrapper">
        <div class="page-content">
            <div class="row w-creditos-procesados">

                <th:block th:if="${page}">
                    <th:block th:switch="${page}">
                        <th:block th:case="generated">
                            <th:block th:replace="fragments/headers :: entityContentHeaderWithFiltersProduct"></th:block>
                        </th:block>
                        <th:block th:case="rejected">
                            <th:block th:replace="fragments/headers :: entityContentHeaderWithFiltersRejectedPage"></th:block>
                        </th:block>
                        <th:block th:case="*">
                            <th:block th:replace="fragments/headers :: entityContentHeaderWithFiltersProductDefault"></th:block>
                        </th:block>
                    </th:block>
                </th:block>
                <th:block th:unless="${page}">
                    <th:block th:replace="fragments/headers :: entityContentHeaderWithFiltersProductDefault"></th:block>
                </th:block>

                <div class="col-xs-12">
                    <div id="creditsTable" class="tablefilter-table table-container">
                        <div class="table-responsive" style="overflow: auto; display: flex; justify-content: center;flex-direction: column">
                            <table id="tableResults" class=" table table-striped table-bordered table-hover table-checkable order-column dataTable">
                                <thead>
                                <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
                                    <tr>
                                        <th>#</th>
                                        <th>Fecha<br/>Generación</th>
                                        <th>Crédito</th>
                                        <th>Producto</th>
                                        <th:block th:if="${!((page == 'generated' or page == 'callcenter') and @entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL))}">
                                            <th>Tipo Doc.</th>
                                        </th:block>
                                        <th>Número Doc.</th>
                                        <th>Nombres</th>
                                        <th:block th:if="${page == 'terminated' or page == 'generated'}">
                                            <th>Apellidos</th>
                                        </th:block>
                                        <th:block th:unless="${page == 'terminated' or page == 'generated'}">
                                            <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
                                                <th>Apellidos</th>
                                            </th:block>
                                            <th:block th:unless="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
                                                <th>Apellido<br/>Paterno</th>
                                                <th>Apellido<br/>Materno</th>
                                            </th:block>
                                        </th:block>
                                        <th:block th:if="${page == 'callcenter'}">
                                            <th>Email</th>
                                            <th>Celular</th>
                                        </th:block>
                                        <th>Monto</th>
                                        <th>Cuotas</th>
                                        <th>Tasa</th>
                                        <th>Documentos</th>

                                        <th:block th:if="${page == 'terminated' or page == 'generated'}">
                                            <th>Responsable<br/>Generación</th>
                                        </th:block>

                                        <th:block th:if="${page == 'terminated'}">
                                            <th>Analista<br/>Desembolso</th>
                                        </th:block>
                                        <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).ABACO)}">
                                            <th>Empleador</th>
                                        </th:block>

                                        <th:block th:if="${page != 'terminated'} and ${page != 'callcenter'}">
                                            <th:block th:switch="${page}">
                                                <th shiro:hasPermission="credit:pending:validate" th:case="pending">Acciones</th>
                                            </th:block>
                                            <th:block th:switch="${page}">
                                                <th shiro:hasPermission="credit:toUpload:upload" th:case="toUpload">Acciones</th>
                                            </th:block>
                                            <th:block th:switch="${page}">
                                                <th shiro:hasPermission="credit:generated:disbursement" th:case="generated">Acciones</th>
                                                <th shiro:hasPermission="credit:generated:disbursement" th:case="callcenter">Acciones</th>
                                            </th:block>
                                        </th:block>
                                        <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
                                            <th th:if="${page == 'generated' or page == 'terminated' or page == 'callcenter'}">Estado interno</th>
                                        </th:block>
                                        <th></th><!--BOTON EXPIRAR-->
                                    </tr>
                                </th:block>
                                <!--EXTRANET NUEVA VISTAS DE PESTAÑAS-->
                                <th:block th:unless="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
                                    <th:block th:switch="${page}">
                                        <th:block th:case="generated">
                                            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerGenerated"></th:block>
                                        </th:block>
                                        <th:block th:case="terminated">
                                            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerTerminated"></th:block>
                                        </th:block>
                                        <th:block th:case="callcenter">
                                            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerCallCenter"></th:block>
                                        </th:block>
                                        <th:block th:case="generatedtc">
                                            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerGeneratedTc"></th:block>
                                        </th:block>
                                        <th:block th:case="terminatedtc">
                                            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerTerminatedTc"></th:block>
                                        </th:block>
                                        <th:block th:case="pending">
                                            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerPending"></th:block>
                                        </th:block>
                                        <th:block th:case="toUpload">
                                            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: headerToUpload"></th:block>
                                        </th:block>
                                    </th:block>
                                </th:block>
                                </thead>
                                <tbody>
                                <th:block th:replace="this :: list"></th:block>
                                </tbody>
                            </table>
                            <th:block th:replace="fragments/footers :: paginatorFooter "></th:block>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <th:block th:replace="/entityExtranet/fragments/extranetModalFragments :: modalCreditActions"></th:block>

    <script th:inline="javascript">
        /*<![CDATA[*/
        var url = /*[[ @{/extranet-paginator/} ]]*/;
        var totalCount = [[${totalCount}]];
        var filterType =  [[${filterType}]];
        var limitPaginator =  [[${limitPaginator}]];
        if(limitPaginator == null) limitPaginator = -1;
        var pageName = [[${page}]];
        url += pageName;

        $(document).on('ready', function () {
            enableTableOptions($("#tableResults"), url, url+"/count", true, (pageName == 'terminatedtc' || pageName == 'generatedtc') ? '#trayBanbifReport' : "#downloadTrayReport");
        });
        /*]]>*/
    </script>

</th:block>


<th:block th:fragment="list">

    <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
        <th:block th:if="${#lists.isEmpty(credits)}">
            <tr>
                <td colspan="11">No hay resultados</td>
            </tr>
        </th:block>
        <th:block th:unless="${#lists.isEmpty(credits)}">
            <tr th:each="credit, iterCredit : ${credits}"
                th:style="${credit?.observationReason?.id != null }? 'background-color:#FFFFCC'">
                <td th:text="${iterCredit.count + (offset != null ? offset : 0)}"></td>
                <td th:text="${@utilService.dateFormat(credit?.inactiveWOScheduleDate)}" th:attr="data-order=${@utilService.datetimeYearFirstFormat(credit?.inactiveWOScheduleDate)}"></td>
                <td>
                    <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).AZTECA)}">
                        <th:block th:text="${credit?.code}"></th:block>
                    </th:block>
                    <th:block th:unless="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).AZTECA)}">
                        <a th:href="@{/credit/__${credit?.id}__}" th:text="${credit?.code}" target="_blank"></a>
                    </th:block>
                </td>
                <td th:text="${credit?.entityProductParams?.entityProduct}"></td>
                <th:block th:if="${!((page == 'generated' or page == 'callcenter') and @entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL))}">
                    <td th:text="${credit?.personDocumentType?.name}"></td>
                </th:block>
                <td th:text="${credit?.personDocumentNumber}"></td>
                <td th:text="${credit?.personName}"></td>

                <th:block th:if="${page == 'terminated' or page == 'generated'}">
                    <td th:text="${credit?.personFullSurnames}"></td>
                </th:block>
                <th:block th:unless="${page == 'terminated' or page == 'generated'}">
                    <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
                        <td th:text="${credit?.personFirstSurname}"></td>
                    </th:block>
                    <th:block th:unless="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
                        <td th:text="${credit?.personFirstSurname}"></td>
                        <td th:text="${credit?.personLastSurname}"></td>
                    </th:block>
                </th:block>
                <th:block th:if="${page == 'callcenter'}">
                    <td th:text="${credit?.email}"></td>
                    <td th:text="${credit?.phoneNumber}"></td>
                </th:block>
                <td th:text="${@utilService.doubleMoneyFormat(credit?.loanCapital, credit?.currency)}"></td>
                <td th:text="${credit?.installments}"></td>

                <th:block th:switch="${credit?.country?.id}">
                    <td th:case="${T(com.affirm.common.model.catalog.CountryParam).COUNTRY_ARGENTINA}" th:text="${@utilService.percentFormat(credit?.nominalAnualRate, credit?.currency)}"></td>
                    <td th:case="*" th:text="${@utilService.percentFormat(credit?.effectiveAnnualRate, credit?.currency)}"></td>
                </th:block>

                <td>
                    <a target="_blank" th:if="${showButton == true}"
                       th:href="${@entityExtranetService.generateUserFilesLink(credit?.id)}" class="link_files">
                        Descargar
                    </a>
                </td>
                <th:block th:if="${page == 'terminated' or page == 'generated'}">
                    <td th:text="${credit?.entityExtranetUser} != null ? ${credit?.entityExtranetUser?.userName} : ''" />
                </th:block>
                <th:block th:if="${page == 'terminated'}">
                    <td th:if="${credit?.getGeneratedOnEntity() == true and credit?.getDisbursedOnEntity() == true}">
                        <span th:text="${credit?.disbursementEntityUser}"></span>
                    </td>
                    <td th:unless="${credit?.getGeneratedOnEntity() == true and credit?.getDisbursedOnEntity() == true}"></td>
                </th:block>

                <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).ABACO)}">
                    <td th:text="${credit?.employer?.name}"/>
                </th:block>

                <!--        ACCIONES-->
                <th:block th:if="${page == 'pending'}">
                    <td>
                        <button th:if="${credit.showPendingToValidateButton  and showButton == true}" id="validateCredit" type="button"
                                class="btn blue btn-sm" style="width:100px;"
                                th:onclick="'validateCredit('+${credit?.id}+', this)'">
                            <i class="fa fa-check"></i> Verificado
                        </button>
                        <button th:if="${credit.showPendingObservations  and showButton == true}" id="creditObservations"
                                th:disabled="${credit?.observationReason?.id != null}" type="button" class="btn grey btn-sm"
                                style="width:100px;" th:onclick="'showCreditObservationsModal('+${credit?.id}+')'">
                            <i class="fa fa-search"></i> Observado
                        </button>
                        <button th:if="${credit.showPendingRejectButton  and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn red btn-sm openRejectCreditModal" th:onclick="'showRegisterCreditRejectionModal('+${credit?.id}+')'">
                            <i class="fa fa-ban"></i> Rechazado
                        </button>
                        <button th:if="${credit.showAccesoScheduleAppointmentButton  and showButton == true}" id="scheduleAppointment" type="button" class="btn blue btn-sm scheduleAppointmentModal" th:onclick="'showScheduleAppointmentModal('+${credit?.id}+')'">
                            <i class="fa fa-check"></i> Agendar cita
                        </button>
                        <button th:if="${credit.showAccesoReScheduleAppointmentButton  and showButton == true}" id="rescheduleAppointment" type="button" class="btn blue btn-sm scheduleAppointmentModal" th:onclick="'showScheduleAppointmentModal('+${credit?.id}+')'">
                            <i class="fa fa-check"></i> Reagendar cita
                        </button>
                    </td>
                </th:block>

                <!--        ACCIONES-->
                <th:block th:if="${credit?.subStatus?.id == T(com.affirm.common.model.catalog.CreditSubStatus).PENDING_ENTIY_LOAD} and ${page != 'callcenter'}">
                    <th:block th:if="${@catalogService.getEntityProductParam(credit?.entity?.id, credit?.product?.id)?.showDisbursement == true}">

                        <td shiro:hasPermission="credit:toUpload:upload">
                            <button shiro:hasPermission="credit:toUpload:upload" th:if="${showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn blue btn-sm loadCredit" th:onclick="'showRegisterGeneratedCreditUploadModal('+${credit?.id}+')'">
                                <i class="fa fa-check"></i> Cargado
                            </button>
                            <button shiro:hasPermission="credit:toUpload:reject"  th:if="${showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn red btn-sm openRejectCreditModal"
                                    th:onclick="'showRegisterGeneratedCreditRejectionModal('+${credit?.id}+')'">
                                <i class="fa fa-ban"></i> Rechazado
                            </button>
                        </td>
                    </th:block>
                    <th:block th:unless="${@catalogService.getEntityProductParam(credit?.entity?.id, credit?.product?.id)?.showDisbursement == true}">
                        <td></td>
                    </th:block>
                </th:block>
                <!--        <th:block th:unless="${credit?.subStatus?.id == T(com.affirm.common.model.catalog.CreditSubStatus).PENDING_ENTIY_LOAD}">-->
                <!--            <td></td>-->
                <!--        </th:block>-->

                <!--        ACCIONES-->
                <th:block th:if="${page == 'generated'}">
                    <td th:if="${credit.showAeluInternalDisbursementButton or credit.showAeluUploadFinalDocumentationButton or credit.showAccesoUploadFinalDocumentationButton or credit.showGeneratedDisbursementButton or credit.showGeneratedRejectButton or credit.showUploadRipleyFinalSchedule or credit.showRemoveRipleyFinalSchedule}">
                        <button th:if="${credit.showAeluInternalDisbursementButton and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn blue btn-sm internalDisbursement" th:onclick="'askInternalDisbursement('+${credit?.id}+')'">
                            Desembolso Interno
                        </button>
                        <button th:if="${credit.showAeluUploadFinalDocumentationButton and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn blue btn-sm uploadFinalDocumentation" th:onclick="'showUploadFinalDocumentationModal('+${credit?.id}+')'">
                            Subir Doc. Final
                        </button>
                        <button th:if="${credit.showAccesoUploadFinalDocumentationButton and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn blue btn-sm uploadFinalDocumentation" th:onclick="'showUploadFinalDocumentationModal('+${credit?.id}+')'">
                            Subir Documentación
                        </button>
                        <button th:if="${credit.showGeneratedDisbursementButton and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn blue btn-sm disbursmentCredit" th:onclick="'showRegisterGeneratedCreditDisbursementModal('+${credit?.id}+','+${credit?.amount}+','+${credit?.installments}+','+${credit?.effectiveAnnualRate}+')'">
                            <i class="fa fa-check"></i> Desembolsado
                        </button>
                        <button th:if="${credit.showGeneratedRejectButton and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn red btn-sm openRejectCreditModal" th:onclick="'showRegisterDisbursementCreditRejectionModal('+${credit?.id}+')'">
                            <i class="fa fa-ban"></i> Rechazado
                        </button>
                        <button th:if="${credit.showUploadRipleyFinalSchedule and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn blue btn-sm uploadFinalSchedule" th:onclick="'openUploadFinalScheduleModal('+${credit?.id}+')'">
                            Subir Cronograma Final
                        </button>
                        <button th:if="${credit.showRemoveRipleyFinalSchedule and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn blue btn-sm removeFinalSchedule" th:onclick="'removeFinalSchedule('+${credit?.id}+', this)'">
                            Eliminar Cronograma Final
                        </button>
                    </td>
                </th:block>
                <th:block th:if="${page == 'generatedtc'}">
                    <!--            <td>-->
                    <!--                <button th:if="${credit.showGeneratedDisbursementButton and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn blue btn-sm disbursmentCredit" th:onclick="'showRegisterGeneratedCreditDisbursementModal('+${credit?.id}+','+${credit?.amount}+','+${credit?.installments}+','+${credit?.effectiveAnnualRate}+')'">-->
                    <!--                    <i class="fa fa-check"></i> Desembolsado-->
                    <!--                </button>-->
                    <!--                <button th:if="${credit.showGeneratedRejectButton and showButton == true}" th:attr="data-id=${credit?.id}" type="button" class="btn red btn-sm openRejectCreditModal" th:onclick="'showRegisterDisbursementCreditRejectionModal('+${credit?.id}+')'">-->
                    <!--                    <i class="fa fa-ban"></i> Rechazado-->
                    <!--                </button>-->
                    <!--            </td>-->
                </th:block>

                <th:block th:if="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
                    <td th:if="${page == 'generated' or page == 'terminated' or page == 'callcenter'}">
                        <select class="form-control  internal-status-select" th:attr="data-credit-id=${credit.id}" name="internalStatus" onchange="updateInternalStatus(this)">
                            <option value="Doc. por enviar"
                                    th:if="${userHierarchy eq null or (not userHierarchy.isNull('level1') and not userHierarchy.isNull('level2') and not userHierarchy.isNull('level3'))}"
                                    th:selected="'Doc. por enviar' == ${credit.getEntityCustomDataBancoDelSolInternalStatus()}">Doc. por enviar</option>
                            <option value="Doc. enviada"
                                    th:if="${userHierarchy eq null or (not userHierarchy.isNull('level1') and not userHierarchy.isNull('level2') and not userHierarchy.isNull('level3'))}"
                                    th:selected="'Doc. enviada' == ${credit.getEntityCustomDataBancoDelSolInternalStatus()}">Doc. enviada</option>
                            <option value="Doc. recibida"
                                    th:if="${userHierarchy eq null}"
                                    th:selected="'Doc. recibida' == ${credit.getEntityCustomDataBancoDelSolInternalStatus()}">Doc. recibida</option>
                            <option value="Doc. a revisar"
                                    th:if="${userHierarchy eq null}"
                                    th:selected="'Doc. a revisar' == ${credit.getEntityCustomDataBancoDelSolInternalStatus()}">Doc. a revisar</option>
                        </select>
                    </td>
                </th:block>
                <th:block>
                    <td th:if="${page != 'terminated' and page != 'callcenter' and (credit?.status?.id == T(com.affirm.common.model.catalog.CreditStatus).INACTIVE_WO_SCHEDULE or credit?.status?.id == T(com.affirm.common.model.catalog.CreditStatus).INACTIVE_W_SCHEDULE)}">
                        <button th:if="${showButton == true}" shiro:hasPermission="loan:expire" type="button" class="btn red btn-sm expire-loan" th:onclick="'expireLoanApplication(this,' + ${credit?.loanApplicationId} + ')'">
                            Expirar solicitud
                        </button>
                    </td>
                    <th:block th:unless="${page != 'terminated' and page != 'callcenter' and (credit?.status?.id == T(com.affirm.common.model.catalog.CreditStatus).INACTIVE_WO_SCHEDULE or credit?.status?.id == T(com.affirm.common.model.catalog.CreditStatus).INACTIVE_W_SCHEDULE)}">
                        <td th:if="${page != 'callcenter'}"></td>
                    </th:block>

                </th:block>
            </tr>
        </th:block>
    </th:block>
    <th:block th:unless="${@entityExtranetService.getLoggedUserEntity().containsEntityId(T(com.affirm.common.model.catalog.Entity).BANCO_DEL_SOL)}">
        <th:block th:if="${page == 'generatedtc'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyGeneratedTc"></th:block>
        </th:block>
        <th:block th:if="${page == 'terminatedtc'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyTerminatedTc"></th:block>
        </th:block>
        <th:block th:if="${page == 'callcenter'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyCallCenter"></th:block>
        </th:block>
        <th:block th:if="${page == 'terminated'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyTerminated"></th:block>
        </th:block>
        <th:block th:if="${page == 'generated'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyGenerated"></th:block>
        </th:block>
        <th:block th:if="${page == 'pending'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyPending"></th:block>
        </th:block>
        <th:block th:if="${page == 'toUpload'}">
            <th:block th:replace="/entityExtranet/fragments/extranetTableHeaderFragments :: bodyToUpload"></th:block>
        </th:block>
    </th:block>

    <script>
        replaceImgSvgToSvgElement();
    </script>

    <th:block th:replace="/entityExtranet/fragments/extranetModalFragments :: modalCreditActionsScripts"></th:block>
</th:block>
</body>
</html>